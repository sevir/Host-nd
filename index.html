<!DOCTYPE html>
<html>
  <head>
    <title>Host file editor</title>
  </head>
  <style type="text/css">
  	body{
  		margin:0;
  		width: 100%;
  		height: 100%;
  		overflow: hidden;
  	}
  	#hostfile{
  		height: 100%;
  		width: 100%;
  		border: none;
  	}
  </style>
  <script type="text/javascript" src="libs/jquery-1.10.2.min.js"></script>
  <script>
  var isWindows = /win/.test(process.platform);
  var fs = require("fs");

  var setTextareaHeight = function(){
  	$("#hostfile").height($(window).height());
  }
  $(function(){
  	$(document).keyup(function(e) {
	  if (e.keyCode == 27) { 
	  	fs.writeFile("/etc/hosts", $("#hostfile").val(), function(err){
	  		if (err){

	  		}
	  		window.close(); 
	  	});
	  	

	  }   // esc
	});

  	$(window).resize(setTextareaHeight);
  	setTextareaHeight();

  	fs.readFile("/etc/hosts", function(err,data){
  		$("#hostfile").val(data).focus().keydown();
  	});
  });
  </script>
  <body>
    <textarea id="hostfile"></textarea>
  </body>
</html>
